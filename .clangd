CompileFlags:
  # 1. 伪装成 clang++ 驱动，确保它按 Clang 的逻辑解析参数
  Compiler: clang++

  # 2. 移除 GCC 15 的专用模块参数 (这些参数会让 clangd 报错或混淆)
  Remove:
    - -fmodules-ts
    - -fmodule-mapper=*
    - -fdeps-format=*
    - -fmodule-only
    - -fmodule-file=* # 移除 GCC 的预编译模块引用

  # 3. 添加 Clang 需要的 C++23 模块参数
  Add:
    - -std=c++23
    - -fcxx-modules             # 开启 Clang 的模块支持
    - -stdlib=libc++    
    - -Wno-unknown-warning-option
    # 下面这行很重要：告诉 clangd 忽略系统头文件中的一些 GCC 扩展语法错误
    - -Wno-pragma-system-header-outside-header 

# 4. 针对 .cppm 或 .ixx 文件的特殊处理
If:
  PathMatch: .*\.(cppm|ixx|cc|cpp)
CompileFlags:
  Add: [-x, c++-module]
